<div class="flex gap-6 grow w-full h-full justify-start">
    <div class="h-full flex flex-col gap-8 w-[27vw]">
        <form class="w-full">   
            <label for="default-search" class="mb-2 text-sm font-medium text-gray-900 sr-only">Search</label>
            <div class="relative">
                <div class="absolute inset-y-0 start-0 flex items-center ps-3 pointer-events-none">
                    <svg width="25" height="25" viewBox="0 0 25 45" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M17.9166 32.25C21.0968 32.2494 24.1853 31.1847 26.6904 29.2257L34.5666 37.1018L37.1 34.5684L29.2239 26.6923C31.1839 24.1869 32.2492 21.0977 32.25 17.9167C32.25 10.0136 25.8197 3.58334 17.9166 3.58334C10.0136 3.58334 3.58331 10.0136 3.58331 17.9167C3.58331 25.8197 10.0136 32.25 17.9166 32.25ZM17.9166 7.16668C23.8453 7.16668 28.6666 11.9881 28.6666 17.9167C28.6666 23.8453 23.8453 28.6667 17.9166 28.6667C11.988 28.6667 7.16665 23.8453 7.16665 17.9167C7.16665 11.9881 11.988 7.16668 17.9166 7.16668Z" fill="#7C7C7C"/>
                    </svg>
                </div>
                <input type="search" id="default-search" class="font-medium block w-full p-5 ps-12 text-md text-gray-900 rounded-2xl bg-white outline-none border-none shadow-primary" placeholder="Search" />
            </div>
        </form> 

        @if(chats.groups.length > 0) {
            <div class="flex flex-col w-full rounded-2xl shadow-primary px-8 py-4 bg-white">
                <h2 class="text-xl font-bold text-[#303030] mb-4">Groups</h2>
                @for(chat of chats.groups; track chat.name) {
                    <button class="flex items-center py-4"
                        (click)="setChatIndex(chats.groups.indexOf(chat), 'group')"
                        [style]="{borderBottom: chats.groups.indexOf(chat) != chats.groups.length-1?'1px solid rgba(180, 171, 171, 0.66)':''}"
                    >
                        <img src="{{ chat.avatar }}" alt="Group Image" class="w-[10%] h-full rounded-full overflow-hidden border-[1px] border-[#7C7C7C]/10" />
                        <div class="flex flex-col px-4 w-[70%]">
                            <span class="text-md font-bold text-[#303030] text-left">{{ chat.name }}</span>
                            <p class="text-sm text-[#7C7C7C] text-left overflow-hidden text-nowrap">{{ chat.message[chat.message.length-1].message }}</p>
                        </div>
                        <div class="flex flex-col w-[20%]">
                            <span class="text-xs font-bold text-[#7C7C7C] text-left">Today {{ chat.message[chat.message.length-1].time }}</span>
                            
                        </div>
                    </button>
                }
            </div>
        }
    </div>
    @if(chatIndex.index != -1) {
        <div class="flex flex-col flex-grow shadow-primary bg-white rounded-2xl p-6">
            <div class="w-full flex justify-between border-b-[2px] border-[rgba(180, 171, 171, 0.66)] pb-4">
                <div class="flex justify-center items-center gap-6">
                    <img src="{{ chats.groups[chatIndex.index].avatar }}" alt="Group Image" class="w-[3vw] h-[3vw] rounded-full overflow-hidden border-[1px] border-[#7C7C7C]/10" />
                    <span class="text-2xl font-bold text-[#303030] text-left text-nowrap">{{ chats.groups[chatIndex.index].name }}</span>
                </div>
                <div class="flex gap-4 justify-center items-center">
                    <svg width="42" height="42" viewBox="0 0 42 42" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M15.2985 15.1935C13.4208 16.7895 12.733 19.6997 14.3535 22.0342C15.8763 24.2239 17.7774 26.1244 19.9675 27.6465C22.302 29.267 25.2123 28.5793 26.8083 26.7015L26.8258 26.7102C28.864 27.655 31.0276 28.3016 33.25 28.63V33.25H33.243C19.2885 33.2693 8.73427 22.5943 8.75002 8.757V8.75H13.37V8.75175C13.699 10.9743 14.3465 13.1372 15.2898 15.1742L15.2985 15.1918V15.1935ZM33.25 36.75H35C35.4642 36.75 35.9093 36.5656 36.2375 36.2374C36.5656 35.9093 36.75 35.4641 36.75 35V27.1215C36.7504 26.7017 36.5998 26.2957 36.3258 25.9777C36.0518 25.6596 35.6725 25.4507 35.2573 25.389L33.7628 25.1685C31.8722 24.8879 30.0317 24.3375 28.2975 23.534L26.9798 22.9233C26.6097 22.7518 26.1915 22.715 25.7972 22.8192C25.4029 22.9233 25.0574 23.1619 24.8203 23.4937L24.2235 24.3285C23.7003 25.0618 22.701 25.284 21.9643 24.7712C20.1171 23.4872 18.5135 21.8842 17.2288 20.0375C16.716 19.299 16.94 18.2998 17.6715 17.7783L18.5063 17.1833C18.8385 16.9461 19.0774 16.6003 19.1815 16.2056C19.2857 15.8109 19.2487 15.3922 19.0768 15.022L18.4643 13.7025C17.6616 11.9682 17.1118 10.1277 16.8315 8.23725L16.6093 6.74275C16.5476 6.3275 16.3386 5.94827 16.0206 5.67424C15.7025 5.40021 15.2966 5.24964 14.8768 5.25H7.00002C6.53589 5.25 6.09077 5.43438 5.76258 5.76256C5.43439 6.09075 5.25002 6.53587 5.25002 7V8.75175C5.23252 24.514 17.3425 36.7728 33.2483 36.75H33.25Z" fill="#9747FF"/>
                    </svg>
                    <svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M12 10.5C10.4087 10.5 8.88258 11.1321 7.75736 12.2574C6.63214 13.3826 6 14.9087 6 16.5V31.5C6 33.0913 6.63214 34.6174 7.75736 35.7426C8.88258 36.8679 10.4087 37.5 12 37.5H27C28.5913 37.5 30.1174 36.8679 31.2426 35.7426C32.3679 34.6174 33 33.0913 33 31.5V30L38.4 34.05C38.7343 34.3007 39.1318 34.4534 39.5479 34.4909C39.9641 34.5284 40.3825 34.4493 40.7562 34.2625C41.13 34.0756 41.4443 33.7883 41.664 33.4329C41.8836 33.0774 42 32.6679 42 32.25V15.75C42 15.3321 41.8836 14.9226 41.664 14.5671C41.4443 14.2117 41.13 13.9244 40.7562 13.7375C40.3825 13.5507 39.9641 13.4716 39.5479 13.5091C39.1318 13.5466 38.7343 13.6993 38.4 13.95L33 18V16.5C33 14.9087 32.3679 13.3826 31.2426 12.2574C30.1174 11.1321 28.5913 10.5 27 10.5H12ZM33 21.75L39 17.25V30.75L33 26.25V21.75ZM30 16.5V31.5C30 32.2956 29.6839 33.0587 29.1213 33.6213C28.5587 34.1839 27.7956 34.5 27 34.5H12C11.2044 34.5 10.4413 34.1839 9.87868 33.6213C9.31607 33.0587 9 32.2956 9 31.5V16.5C9 15.7044 9.31607 14.9413 9.87868 14.3787C10.4413 13.8161 11.2044 13.5 12 13.5H27C27.7956 13.5 28.5587 13.8161 29.1213 14.3787C29.6839 14.9413 30 15.7044 30 16.5Z" fill="#9747FF"/>
                    </svg>
                    <svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M23.75 32.5C23.75 33.4946 23.3549 34.4484 22.6517 35.1517C21.9484 35.8549 20.9946 36.25 20 36.25C19.0054 36.25 18.0516 35.8549 17.3483 35.1517C16.6451 34.4484 16.25 33.4946 16.25 32.5C16.25 31.5054 16.6451 30.5516 17.3483 29.8483C18.0516 29.1451 19.0054 28.75 20 28.75C20.9946 28.75 21.9484 29.1451 22.6517 29.8483C23.3549 30.5516 23.75 31.5054 23.75 32.5ZM23.75 20C23.75 20.9946 23.3549 21.9484 22.6517 22.6517C21.9484 23.3549 20.9946 23.75 20 23.75C19.0054 23.75 18.0516 23.3549 17.3483 22.6517C16.6451 21.9484 16.25 20.9946 16.25 20C16.25 19.0054 16.6451 18.0516 17.3483 17.3483C18.0516 16.6451 19.0054 16.25 20 16.25C20.9946 16.25 21.9484 16.6451 22.6517 17.3483C23.3549 18.0516 23.75 19.0054 23.75 20ZM23.75 7.5C23.75 8.49456 23.3549 9.44839 22.6517 10.1517C21.9484 10.8549 20.9946 11.25 20 11.25C19.0054 11.25 18.0516 10.8549 17.3483 10.1517C16.6451 9.44839 16.25 8.49456 16.25 7.5C16.25 6.50544 16.6451 5.55161 17.3483 4.84835C18.0516 4.14509 19.0054 3.75 20 3.75C20.9946 3.75 21.9484 4.14509 22.6517 4.84835C23.3549 5.55161 23.75 6.50544 23.75 7.5Z" fill="#9747FF"/>
                    </svg>                        
                </div>
            </div>
            <div class="flex flex-col gap-6 py-6 w-full">
                @for(message of chats.groups[chatIndex.index].message; track message) {
                    <div class="flex gap-4 w-full" [class]="message.user == 'me'?'justify-end':'justify-start'">
                        <div class="flex gap-4 max-w-[40%] min-w-[20%]"
                            [style] = "{flexDirection: message.user == 'me'?'row-reverse':'row'}"
                        >
                            <svg data-avatar-placeholder-icon="true" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg" class="w-[1.5vw] h-[1.5vw]">
                                <path d="M0.877014 7.49988C0.877014 3.84219 3.84216 0.877045 7.49985 0.877045C11.1575 0.877045 14.1227 3.84219 14.1227 7.49988C14.1227 11.1575 11.1575 14.1227 7.49985 14.1227C3.84216 14.1227 0.877014 11.1575 0.877014 7.49988ZM7.49985 1.82704C4.36683 1.82704 1.82701 4.36686 1.82701 7.49988C1.82701 8.97196 2.38774 10.3131 3.30727 11.3213C4.19074 9.94119 5.73818 9.02499 7.50023 9.02499C9.26206 9.02499 10.8093 9.94097 11.6929 11.3208C12.6121 10.3127 13.1727 8.97172 13.1727 7.49988C13.1727 4.36686 10.6328 1.82704 7.49985 1.82704ZM10.9818 11.9787C10.2839 10.7795 8.9857 9.97499 7.50023 9.97499C6.01458 9.97499 4.71624 10.7797 4.01845 11.9791C4.97952 12.7272 6.18765 13.1727 7.49985 13.1727C8.81227 13.1727 10.0206 12.727 10.9818 11.9787ZM5.14999 6.50487C5.14999 5.207 6.20212 4.15487 7.49999 4.15487C8.79786 4.15487 9.84999 5.207 9.84999 6.50487C9.84999 7.80274 8.79786 8.85487 7.49999 8.85487C6.20212 8.85487 5.14999 7.80274 5.14999 6.50487ZM7.49999 5.10487C6.72679 5.10487 6.09999 5.73167 6.09999 6.50487C6.09999 7.27807 6.72679 7.90487 7.49999 7.90487C8.27319 7.90487 8.89999 7.27807 8.89999 6.50487C8.89999 5.73167 8.27319 5.10487 7.49999 5.10487Z" fill="currentColor" fill-rule="evenodd" clip-rule="evenodd"></path>
                            </svg>
                            <div class="flex flex-col gap-2 rounded-2xl p-4 flex-grow"
                                [style]="{backgroundColor: message.user == 'me'?'#6E00FF':'#E7E7E7', color: message.user == 'me'?'#FFFFFF':'#303030'}"
                            >
                                <span class="text-sm font-bold">{{ message.name }}</span>
                                <p class="text-sm"
                                    [style]="{color: message.user == 'me'?'#FFFFFF':'#303030'}"
                                >{{ message.message }}</p>
                            </div>
                        </div>
                    </div>
                }
            </div>
        </div>
    }
</div>
